#define TRIG 2
#define ECHO 3

long distancia;
int entradas = 0;

long medirDistancia() {
  digitalWrite(TRIG, LOW);
  delayMicroseconds(5);
  digitalWrite(TRIG, HIGH);
  delayMicroseconds(10);
  digitalWrite(TRIG, LOW);

  long duracao = pulseIn(ECHO, HIGH, 25000);
  if (duracao == 0) return 999; // nada detectado

  return (duracao * 0.034) / 2;
}

void setup() {
  Serial.begin(9600);
  pinMode(TRIG, OUTPUT);
  pinMode(ECHO, INPUT);

  Serial.println("Contador de Entradas Iniciado");
}

void loop() {
  distancia = medirDistancia();

  if (distancia < 40) {    
    entradas++;
    Serial.print("Entrada detectada! Total: ");
    Serial.println(entradas);
    delay(1500);  // espera a pessoa sair
  }

  delay(100);
}
